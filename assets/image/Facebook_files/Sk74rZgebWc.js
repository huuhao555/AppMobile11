;/*FB_PKG_DELIM*/

__d("MWChatMediaViewerControls.react",["fbt","ix","CometRow.react","CometRowItem.react","CometTooltip.react","JSResourceForInteraction","MWChatMessageId","MWLSForwardMessage","ODS","ReQL","ReQLSuspense","TetraCircleButton.react","emptyFunction","fbicon","gkx","justknobx","promiseDone","react","unrecoverableViolation","useMWChatForward","useMWV2ForwardMessage","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=l||(l=d("react")),n=l,o=n.useCallback,p=n.useState,q=c("JSResourceForInteraction")("MWChatMediaViewerAttachmentInfoDialog.react").__setRef("MWChatMediaViewerControls.react"),r={iconHovered:{backgroundColor:"x9lwmrp",$$css:!0}},s=h._("__JHASH__yVgFxyhzJWR__JHASH__");n=h._("__JHASH__ZATDQpNzCxD__JHASH__");var t=h._("__JHASH__GvPr2MwluxY__JHASH__"),u=h._("__JHASH__6SgahmF3MRz__JHASH__");function a(a,b){var e=(j||(j=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return b!=null?d("ReQL").fromTableAscending(e.table("messages").index("messageId")).getKeyRange(b):d("ReQL").empty()},[e,b],f.id+":75");if(g==null)throw c("unrecoverableViolation")("Message does not exist in LSDB when forwarding from Media Viewer","messenger_web_product");var h=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.table("threads"),["threadType"]).getKeyRange(g.threadKey).map(function(a){a=a.threadType;return a})},[e,g.threadKey],f.id+":91");if(h==null)throw c("unrecoverableViolation")("Thread type does not exist in LSDB when forwarding from Media Viewer","messenger_web_product");var i=c("useMWV2ForwardMessage")(g,h,a);return function(a){return c("promiseDone")(i(a))}}function b(a,b){var c=d("MWLSForwardMessage").useForwardAttachment();return o(function(d){c(d,a,b)},[a,c,b])}var v=c("justknobx")._("1897")?b:a;function e(a){var b=a.attachmentID,e=a.canForward;e=e===void 0?!0:e;var f=a.downloadLink,g=a.isCrossTransportForwardEnabled;g=g===void 0?!1:g;var h=a.isSecureForwardEnabled;h=h===void 0?!1:h;var j=a.messageID;a=p(!1);var l=a[0],n=a[1];a=p(!1);var w=a[0];w=a[1];a=p(!1);w=a[0];var x=a[1];a=h?"secure":g?"cross_transport":"open_";h=d("MWChatMessageId").getMessageId(j);g=v(b,h);var y=c("useMWChatForward")({forwardDialogType:a,messageID:j,onClose:c("emptyFunction"),onSend:g}),z=function(){(k||(k=d("ODS"))).bumpEntityKey(3185,"mwchat_media_viewer","forward"),y&&y.onClick()};h=c("useMWXLazyDialog")(q);var A=h[0],B=o(function(){A({attachmentID:b,messageID:j})},[A,j,b]);return m.jsxs(c("CometRow.react"),{paddingTop:0,spacing:8,children:[f!=null?m.jsx(c("CometRowItem.react"),{children:m.jsx(c("CometTooltip.react"),{align:"middle",tooltip:s,children:m.jsx(c("TetraCircleButton.react"),{color:"white",icon:l?d("fbicon")._(i("1433212"),20):d("fbicon")._(i("1441392"),20),label:s,linkProps:{download:!0,target:"_blank",url:f},onHoverIn:function(a){return n(!0)},onHoverOut:function(a){return n(!1)},overlayHoveredStyle:r.iconHovered,size:36,testid:void 0,type:"deemphasized"})})}):null,e===!0?m.jsx(c("CometRowItem.react"),{children:m.jsx(c("CometTooltip.react"),{align:"middle",tooltip:t,children:m.jsx(c("TetraCircleButton.react"),{color:"white",icon:d("fbicon")._(i("1433236"),20),label:t,onPress:function(a){return z()},overlayHoveredStyle:r.iconHovered,size:36,testid:void 0,type:"deemphasized"})})}):null,null,c("gkx")("1555108")?m.jsx(c("CometRowItem.react"),{children:m.jsx(c("CometTooltip.react"),{align:"middle",tooltip:u,children:m.jsx(c("TetraCircleButton.react"),{color:"white",icon:w?d("fbicon")._(i("479177"),20):d("fbicon")._(i("479180"),20),label:u,onHoverIn:function(a){return x(!0)},onHoverOut:function(a){return x(!1)},onPress:function(a){return B()},overlayHoveredStyle:r.iconHovered,size:36,testid:void 0,type:"deemphasized"})})}):null]})}e.displayName=e.name+" [from "+f.id+"]";g["default"]=e}),98);
__d("CometAdPreferencesHiddenAdvertisersSectionQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5675243755824496"}),null);